# UWC Gitter Bot
[![Join the chat at https://gitter.im/yuristrelets/uwc7](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/yuristrelets/uwc7?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)

> Решение для UA Web Challenge VII

## Установка
```
npm i
```

## Запуск
```
node index.js [room] [token]
```
Можно запустить без параметров, тогда будет использоваться комната `yuristrelets/uwc7` и мой токен.

## Бот

Проект состоит из 2 частей: `бота` и `парсеров`.

Бот использует [node-gitter](), умеет слушать комнату или несколько комнат, а также входящие сообщения.
Больше бот ничего не умеет, но предоставляет интерфейс для добавления парсеров, которые смогут реагировать на входящие сообщения.

При подключении к комнате, бот выводит приветствие и список доступных комманд.

Использование:
```
new GitterBot('token')
  .setName('Bot Name')  // set bot name
  .addParser(...)       // add parser
  .listenRoom('room');  // start listen room
```


## Парсер

Особых ограничений к парсеру нет, но он должен реализовывать два обязательных метода:
 * `execute(room, message)` вызывается для обработки сообщения, принимает объект комнаты и объект сообщения
 * `help()` должен вернуть подсказку по использованию парсера

Использование:
```
bot.addParser(new HelloParser());
```

В проекте реализованы 3 парсера.

**Calc Parser**

Главный парсер, обозначенный в задании.
Реагирует на комманду `calc {expression}` и возвращает вычисленный результат.
Используется библиотека [mathjs](), поэтому выражения могут содержать все [доступные]() операции.

**Hello Parser**

Реагирует на комманду `hello` и выводит приветствие с именем пользователя.

**Exchange Rate Parser**

Реагирует на комманду `exchange [USD|EUR|RUR]` и выводит текущий курс валют по Приватбанку.
Курсы загружаются при создании парсера и в дальнейшем не обновляются. В реальном приложении желательно добавить
кеширование (на небольшой промежуток времени) и обновление данных.